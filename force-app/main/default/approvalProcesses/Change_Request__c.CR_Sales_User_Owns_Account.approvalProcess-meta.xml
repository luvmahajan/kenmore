<?xml version="1.0" encoding="UTF-8"?>
<ApprovalProcess xmlns="http://soap.sforce.com/2006/04/metadata">
    <active>false</active>
    <allowRecall>false</allowRecall>
    <allowedSubmitters>
        <type>creator</type>
    </allowedSubmitters>
    <allowedSubmitters>
        <type>owner</type>
    </allowedSubmitters>
    <approvalPageFields>
        <field>Name</field>
    </approvalPageFields>
    <approvalStep>
        <allowDelegate>false</allowDelegate>
        <approvalActions>
            <action>
                <name>Approval_Comment_Required</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>Approver_Status_field_update</name>
                <type>FieldUpdate</type>
            </action>
        </approvalActions>
        <assignedApprover>
            <approver>
                <type>userHierarchyField</type>
            </approver>
        </assignedApprover>
        <description>Approval is sent to District Manager - First Approver</description>
        <label>Approval by District Manager</label>
        <name>Approval_by_District_Manager</name>
        <rejectionActions>
            <action>
                <name>Approval_Comment_Required</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>Field_Update_DM_Reject</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>update_the_approver_name_on_reject</name>
                <type>FieldUpdate</type>
            </action>
        </rejectionActions>
    </approvalStep>
    <approvalStep>
        <allowDelegate>false</allowDelegate>
        <approvalActions>
            <action>
                <name>Approval_Comment_Required</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>File_Admin_Approval_Status_is_Updated</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>update_the_file_admin_name</name>
                <type>FieldUpdate</type>
            </action>
        </approvalActions>
        <assignedApprover>
            <approver>
                <name>aglenn99@searshc.com</name>
                <type>user</type>
            </approver>
            <approver>
                <name>diane.allen@kenmoredirect.com</name>
                <type>user</type>
            </approver>
            <whenMultipleApprovers>FirstResponse</whenMultipleApprovers>
        </assignedApprover>
        <description>The approval request is sent to File Administrator - Second Apporver</description>
        <label>Approval by File Administrator</label>
        <name>Approval_by_File_Administrator</name>
        <rejectBehavior>
            <type>RejectRequest</type>
        </rejectBehavior>
        <rejectionActions>
            <action>
                <name>Approval_Comment_Required</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>File_Admin_Approval_Status_is_Approved</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>update_the_file_admin_name_on_reject</name>
                <type>FieldUpdate</type>
            </action>
        </rejectionActions>
    </approvalStep>
    <description>On click of Submit for Approval, District Manager will get the approval request. On approval by the District Manager, the Approval request is sent to File Admin. On Approval by the File Admin, the Approver Status will be changed to Approved.</description>
    <enableMobileDeviceAccess>false</enableMobileDeviceAccess>
    <entryCriteria>
        <formula>AND( 
CreatedBy.Id = Account_Name__r.Owner.Id, 
OR(
CreatedBy.Profile.Name = &#39;Standard Commercial AM User&#39;, 
CreatedBy.Profile.Name = &#39;Standard Inside Sales User&#39;,
CreatedBy.Profile.Name = &#39;Standard Healthcare&#39;
)
)</formula>
    </entryCriteria>
    <finalApprovalActions>
        <action>
            <name>Change_Request_Completed_Email_Notification_1</name>
            <type>Alert</type>
        </action>
    </finalApprovalActions>
    <finalApprovalRecordLock>true</finalApprovalRecordLock>
    <finalRejectionActions>
        <action>
            <name>Change_Request_Rejected_Email_Notification_1</name>
            <type>Alert</type>
        </action>
    </finalRejectionActions>
    <finalRejectionRecordLock>false</finalRejectionRecordLock>
    <initialSubmissionActions>
        <action>
            <name>Field_Update_of_Request_Status_field</name>
            <type>FieldUpdate</type>
        </action>
    </initialSubmissionActions>
    <label>CR Sales User Owns Account</label>
    <nextAutomatedApprover>
        <useApproverFieldOfRecordOwner>false</useApproverFieldOfRecordOwner>
        <userHierarchyField>Manager</userHierarchyField>
    </nextAutomatedApprover>
    <recordEditability>AdminOnly</recordEditability>
    <showApprovalHistory>true</showApprovalHistory>
</ApprovalProcess>
